{% extends 'base.html' %}
{% load static %}

{% block title %}Teacher Dashboard{% endblock %}

{% block extra_head %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
<style>
    body { background-color: #f4f7fc; }
    .dashboard-header { background: linear-gradient(135deg, #0d6efd 0%, #0056b3 100%); color: white; padding: 2rem; border-radius: 0.75rem; margin-bottom: 2rem; box-shadow: 0 8px 16px rgba(0, 86, 179, 0.2); }
    .profile-img-header { width: 80px; height: 80px; object-fit: cover; border: 3px solid rgba(255, 255, 255, 0.8); }
    .dashboard-header h2 { font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
    .dashboard-header p { color: rgba(255, 255, 255, 0.85); }
    .nav-pills .nav-link { color: #495057; font-weight: 500; padding: 0.75rem 1.25rem; border-radius: 0.5rem; transition: all 0.2s ease-in-out; }
    .nav-pills .nav-link.active, .nav-pills .show>.nav-link { color: #fff; background-color: #0d6efd; box-shadow: 0 4px 12px rgba(13, 110, 253, 0.4); }
    .nav-pills .nav-link:hover:not(.active) { background-color: #e9ecef; }
    .tab-content { background-color: #ffffff; border: none; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); }
    .widget-title { font-weight: 600; color: #343a40; margin-bottom: 1.5rem; border-bottom: 2px solid #e9ecef; padding-bottom: 0.75rem; }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4 main-content-below-navbar">
    <div class="dashboard-header d-flex flex-column flex-md-row align-items-center">
        {#{% if teacher.profile_image %}#}
        {#   <img src="{{ teacher.profile_image.url }}" class="rounded-circle me-md-4 mb-3 mb-md-0 profile-img-header" alt="Profile Photo">#}
        {#{% else %}#}
        {#     <img src="{% static 'core/images/default.jpg' %}" class="rounded-circle me-md-4 mb-3 mb-md-0 profile-img-header" alt="Default Profile Photo">#}
        {#{% endif %}#}
        <div class="text-center text-md-start">
            <h2 class="h3 mb-1">Welcome, {{ teacher.user.first_name|default:teacher.user.username }}!</h2>
            <p class="mb-0">Your central hub for managing your classes and academic tasks.</p>
        </div>
        <div class="ms-md-auto mt-3 mt-md-0">
            <a href="{% url 'teacher_update' teacher.user.pk %}" class="btn btn-light me-2"><i class="bi bi-person-fill-gear me-1"></i> Edit Profile</a>
            <a href="{% url 'create_assignment' %}" class="btn btn-light"><i class="bi bi-journal-plus me-1"></i> New Assignment</a>
        </div>
    </div>
    
    {% if messages %}{% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}{% endif %}

    <div class="nav-pills-container bg-white p-3 rounded-3 shadow-sm mb-4">
        <ul class="nav nav-pills nav-fill" id="teacherDashboardTabs" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="pill" data-bs-target="#overview-panel" type="button"><i class="bi bi-grid-1x2-fill me-2"></i>Overview</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#class-management-panel" type="button"><i class="bi bi-pencil-square me-2"></i>Class & Grade Entry</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#communication-panel" type="button"><i class="bi bi-people-fill me-2"></i>Communication</button></li>           
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#assignments-panel" type="button"><i class="bi bi-journal-check me-2"></i>Manage Tasks</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#leaderboard-panel" type="button"><i class="bi bi-trophy-fill me-2"></i>Leaderboard</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#broadsheets-panel" type="button"><i class="bi bi-table me-2"></i>Broadsheets</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#lms-panel" type="button"><i class="bi bi-mortarboard-fill me-2"></i>LMS</button></li>
        </ul>
    </div>

    <div class="tab-content" id="teacherDashboardTabContent">
        <div class="tab-pane fade show active" id="overview-panel" role="tabpanel">{% include 'teacher/partials/dashboard_overview.html' %}</div>
        <div class="tab-pane fade" id="class-management-panel" role="tabpanel">{% include 'teacher/partials/dashboard_class_management.html' %}</div>
        <div class="tab-pane fade" id="communication-panel" role="tabpanel">{% include 'teacher/partials/dashboard_communication.html' %}</div>
        <div class="tab-pane fade" id="assignments-panel" role="tabpanel">{% include 'teacher/partials/dashboard_assignments.html' %}</div>
        <div class="tab-pane fade" id="leaderboard-panel" role="tabpanel">{% include 'teacher/partials/dashboard_leaderboard.html' %}</div>
        <div class="tab-pane fade" id="broadsheets-panel" role="tabpanel">{% include 'teacher/partials/dashboard_broadsheets.html' %}</div>
        <div class="tab-pane fade" id="lms-panel" role="tabpanel">{% include 'teacher/partials/dashboard_lms.html' %}</div>
    </div>
</div>
{% endblock %}